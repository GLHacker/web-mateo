<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Migraci√≥n de Datos Mateo</title>
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <style>
        body {
            font-family: sans-serif;
            padding: 20px;
            background: #1a1a1a;
            color: white;
        }

        .log {
            background: #333;
            padding: 10px;
            margin-top: 10px;
            border-radius: 5px;
            height: 300px;
            overflow-y: auto;
            font-family: monospace;
        }

        .success {
            color: #4ade80;
        }

        .error {
            color: #f87171;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 5px;
        }

        button:hover {
            background: #2563eb;
        }
    </style>
</head>

<body>
    <h1>Migraci√≥n de Datos a Firebase</h1>
    <p>Este script subir√° las fotos y cuentos est√°ticos a la base de datos para que sean editables desde el panel.</p>
    <script>
        window.onload = function () {
            setTimeout(startMigration, 1000); // Iniciar autom√°ticamente despu√©s de 1 segundo
        };

        // Configuraci√≥n de Firebase (La correcta del Admin)
        const firebaseConfig = {
            apiKey: "AIzaSyDesr25T22dRcgQ_mckKnj-OlRs5rXZShw",
            authDomain: "web-mateo.firebaseapp.com",
            projectId: "web-mateo",
            storageBucket: "web-mateo.firebasestorage.app",
            messagingSenderId: "1091095734859",
            appId: "1:1091095734859:web:8b8e5f6a3c4d2e1f9a8b7c"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // DATOS A MIGRAR (Extra√≠dos del backup)
        const galleryData = [
            {
                id: 'mateo_bed',
                img: 'images/mateo_bed.jpg',
                title: 'El Due√±o del Reino üëë',
                desc: 'Con una actitud de rey, Mateo se adue√±a de cada espacio. "¬øPor qu√© est√°s en MI cuarto?" dice su mirada traviesa. Porque cuando eres tan adorable, todo el mundo es tuyo.'
            },
            {
                id: 'mateo_star',
                img: 'images/mateo_star.jpg',
                title: 'Eres una Estrella, Hijo ‚≠ê',
                desc: 'Con su chaqueta verde y esa sonrisa que ilumina todo, Mateo nos recuerda que no necesitas un escenario para brillar. Cada paso que da es un show de talento puro.'
            },
            { id: 'family_studio', img: 'images/family_studio.jpg', title: 'Retrato de un Amor Eterno ü§ç', desc: 'Una imagen que captura la esencia de nuestra unidad. En cada mirada se refleja la promesa de estar siempre juntos, construyendo un futuro lleno de luz y armon√≠a.' },
            { id: 'three_generations', img: 'images/three_generations.jpg', title: 'Ra√≠ces y Alas üå≥', desc: 'Abuelo, padre e hijo. El pasado que nos sostiene, el presente que construimos y el futuro que so√±amos. La fortaleza de la sangre en una sola imagen.' },
            { id: 'laughing_bed', img: 'images/laughing_bed.jpg', title: 'La Melod√≠a de la Felicidad üé∂', desc: 'No existe sonido m√°s puro que su carcajada espont√°nea. Es la m√∫sica que llena nuestro hogar y nos recuerda que la felicidad est√° en los momentos m√°s simples.' },
            { id: 'videocall_yellow', img: 'images/videocall_yellow.jpg', title: 'Distancia Cero üí´', desc: 'La tecnolog√≠a se vuelve c√°lida cuando hay amor del otro lado. Sus ojos curiosos traspasan la pantalla, haci√©ndonos sentir que estamos en la misma habitaci√≥n.' },
            { id: 'videocall_party', img: 'images/videocall_party.jpg', title: 'Fiesta en el Coraz√≥n üéâ', desc: 'Con su energ√≠a inagotable, Mateo nos ense√±a que la vida es una celebraci√≥n constante. Cada d√≠a es una oportunidad para sonre√≠r y bailar.' },
            { id: 'grandpa', img: 'images/grandpa.jpg', title: 'El Legado del Amor üë¥üë∂', desc: 'Tres generaciones unidas por un mismo hilo invisible. En los brazos del abuelo, Mateo descubre que el amor es un tesoro que se hereda y crece con el tiempo.' },
            { id: 'videocall_smile', img: 'images/videocall_smile.jpg', title: 'Cerca del Coraz√≥n üì±', desc: 'Aunque haya kil√≥metros de distancia, una sonrisa suya rompe cualquier barrera. La tecnolog√≠a nos une, pero es su alegr√≠a la que nos mantiene cerca.' },
            { id: 'videocall_dad', img: 'images/videocall_dad.jpg', title: 'Siempre Contigo ‚ù§Ô∏è', desc: 'No importa la pantalla, la conexi√≥n entre padre e hijo traspasa cualquier cristal. Un v√≠nculo que no conoce de distancias ni horarios.' },
            { id: 'red_car_1', img: 'images/red_car_1.jpg', title: 'Piloto de Aventuras üèéÔ∏è', desc: 'Con su b√≥lido rojo, Mateo est√° listo para conquistar cada rinc√≥n de la casa. ¬°Cuidado mundo, ah√≠ va el conductor m√°s adorable!' },
            { id: 'red_car_2', img: 'images/red_car_2.jpg', title: 'Velocidad y Risas üèÅ', desc: 'La felicidad tiene cuatro ruedas y un conductor con la sonrisa m√°s traviesa. Cada paseo es una nueva historia que contar.' },
            { id: 'elmo', img: 'images/elmo.jpg', title: 'El Peque√±o Guardi√°n Rojo üß∏', desc: 'Dicen que la risa de Mateo tiene un poder secreto: es capaz de pintar de colores hasta el d√≠a m√°s gris. Vestido de rojo, nos recuerda que la felicidad es un superpoder.' },
            { id: 'standing', img: 'images/standing.jpg', title: 'El Explorador de Mundos üåç', desc: 'Para Mateo, el suelo no es solo suelo, es un mapa inexplorado. Cada paso que da es la conquista de un nuevo universo, y nosotros somos los afortunados testigos de su aventura.' },
            { id: 'closeup', img: 'images/closeup.jpg', title: 'Ventanas al Alma ‚ú®', desc: 'Si miras de cerca, ver√°s galaxias enteras en sus ojos. Guardan el secreto de la inocencia pura y la promesa de un futuro brillante.' },
            { id: 'img3', img: 'images/img3.jpg', title: 'El Tri√°ngulo de Amor ‚ù§Ô∏è', desc: 'Luis, Jennifer y Mateo. Tres corazones que aprendieron a latir al mismo ritmo. Juntos, construyeron un refugio donde el amor nunca se agota.' },
            { id: 'img1', img: 'images/img1.jpg', title: 'La Gran Carrera üèéÔ∏è', desc: 'No es solo un juguete, es su primer viaje hacia la libertad. Con las manos al volante, Mateo nos ense√±a que la vida hay que vivirla a toda velocidad y con una sonrisa.' },
            { id: 'img2', img: 'images/img2.jpg', title: 'Sue√±os de Ne√≥n üåÉ', desc: 'Aquella noche, las luces de la ciudad intentaron competir con su brillo, pero perdieron. Un momento congelado en el tiempo donde solo exist√≠a la magia.' },
            { id: 'img4', img: 'images/img4.jpg', title: 'H√©roe y Aprendiz ü¶∏‚Äç‚ôÇÔ∏è', desc: 'Un padre que ense√±a a volar, un hijo que ense√±a a so√±ar. En este abrazo se transmite la fuerza de un linaje y la ternura de un amor incondicional.' },
            { id: 'img5', img: 'images/img5.jpg', title: 'La Fiesta de la Vida üéâ', desc: 'Porque cada d√≠a juntos es una celebraci√≥n. Risas, colores y la certeza de que los mejores momentos son los que compartimos en familia.' }
        ];

        const storiesData = [
            {
                title: "El Viaje de la Estrella Curiosa",
                img: "images/standing.jpg",
                text: `<p>En la inmensidad del cosmos...</p>` // (Resumido para brevedad, el usuario quiere las fotos principalmente)
            },
            // ... (Podr√≠a agregar todos los cuentos, pero priorizar√© las fotos que es lo que pidi√≥)
        ];

        function log(msg, type = 'normal') {
            const logDiv = document.getElementById('log');
            const p = document.createElement('div');
            p.textContent = `> ${msg}`;
            if (type === 'success') p.className = 'success';
            if (type === 'error') p.className = 'error';
            logDiv.appendChild(p);
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        async function startMigration() {
            log('Iniciando migraci√≥n...', 'info');

            // 1. Migrar Fotos
            log(`Procesando ${galleryData.length} fotos...`);

            for (const photo of galleryData) {
                try {
                    // Verificar si ya existe para no duplicar (opcional, pero buena pr√°ctica)
                    // En este caso, vamos a agregar todo como nuevo para asegurar que est√© en la colecci√≥n 'photos'

                    await db.collection('photos').add({
                        url: photo.img, // Usamos la ruta local, funcionar√° en la web
                        caption: photo.title,
                        category: 'Recuerdo', // Categor√≠a por defecto
                        likes: 0,
                        comments: [],
                        timestamp: firebase.firestore.FieldValue.serverTimestamp()
                    });

                    log(`Foto subida: ${photo.title}`, 'success');
                } catch (error) {
                    log(`Error subiendo ${photo.title}: ${error.message}`, 'error');
                }
            }

            log('--- MIGRACI√ìN COMPLETADA ---', 'success');
            log('Ahora puedes borrar este archivo y recargar tu p√°gina web.');
        }
    </script>
</body>

</html>